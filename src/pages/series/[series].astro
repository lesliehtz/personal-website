---
import { getCollection } from 'astro:content';
import SeriesLayout from '../../layouts/series_layout.astro';

export async function getStaticPaths() {
  const allSeries = await getCollection('series');
  return allSeries.map((entry) => ({
    params: { series: entry.id },
    props: { entry },
  }));
}

const { entry } = Astro.props;

const allSeries = await getCollection('series');
const seriesData = allSeries.map((s) => ({
  title: s.data.title,
  slug: s.id,
}));
---

<SeriesLayout
  title={entry.data.title}
  date={entry.data.date}
  description={entry.data.description || ''}
  series={seriesData}
  seriesSlug={entry.id}
/>
