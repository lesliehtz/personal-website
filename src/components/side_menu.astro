---
interface Props {
  series?: Array<{ title: string; slug: string }>;
}

const { series = [] } = Astro.props;
const currentPath = Astro.url.pathname;
---

<nav class="side-menu">
  <div class="menu-section">
    <a href="/" class="menu-label">Series</a>
    {
      series.length > 0 && (
        <ul class="series-list">
          {series.map((item) => (
            <li>
              <a
                href={`/series/${item.slug}`}
                class:list={[
                  { active: currentPath === `/series/${item.slug}` },
                ]}
              >
                {item.title}
              </a>
            </li>
          ))}
        </ul>
      )
    }
  </div>

  <div class="menu-section">
    <a href="/about" class:list={[{ active: currentPath === '/about' }]}>
      About
    </a>
  </div>

  <div class="menu-section">
    <a
      href="#"
      class="contact-link"
      data-user="heintz.leslie"
      data-domain="gmail.com"
    >
      Contact
    </a>
  </div>
</nav>

<style>
  .side-menu {
    text-align: left;
  }

  .menu-section {
    margin-bottom: 1.5rem;
  }

  .menu-label {
    margin-bottom: 0.5rem;
  }

  .series-list {
    list-style: none;
    padding-left: 1rem;
  }

  .series-list li {
    margin-bottom: 0.25rem;
  }

  .active {
    font-weight: 600;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const contactLink = document.querySelector('.contact-link');
    if (contactLink) {
      const user = contactLink.getAttribute('data-user');
      const domain = contactLink.getAttribute('data-domain');
      contactLink.setAttribute('href', `mailto:${user}@${domain}`);
    }
  });
</script>

<!-- fixed side menu for navigation -->
